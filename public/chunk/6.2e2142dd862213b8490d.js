webpackJsonp([6],{186:function(t,e,a){var i=a(6)(a(212),a(217),null,null,null);t.exports=i.exports},192:function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=a(193),r=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),n=function(){function t(e){i(this,t),this.originalData=e;for(var a in e)this[a]=e[a];this.errors=new s.a}return r(t,[{key:"data",value:function(){var t={};for(var e in this.originalData)t[e]=this[e];return t}},{key:"reset",value:function(){for(var t in this.originalData)this[t]="";this.errors.clear()}},{key:"post",value:function(t){return this.submit("post",t)}},{key:"put",value:function(t){return this.submit("put",t)}},{key:"patch",value:function(t){return this.submit("patch",t)}},{key:"delete",value:function(t){return this.submit("delete",t)}},{key:"submit",value:function(t,e){var a=this;return new Promise(function(i,s){axios[t](e,a.data()).then(function(t){a.onSuccess(t.data),i(t.data)}).catch(function(t){a.onFail(t.response.data),s(t.response.data)})})}},{key:"onSuccess",value:function(t){}},{key:"onFail",value:function(t){this.errors.record(t)}}]),t}();e.a=n},193:function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),r=function(){function t(){i(this,t),this.errors={}}return s(t,[{key:"has",value:function(t){return this.errors.hasOwnProperty(t)}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"get",value:function(t){if(this.errors[t])return this.errors[t][0]}},{key:"record",value:function(t){this.errors=t}},{key:"clear",value:function(t){if(t)return void delete this.errors[t];this.errors={}}}]),t}();e.a=r},194:function(t,e){t.exports={current_page:null,first_page:1,last_page:null,total:null,next_page_url:null,prev_page_url:null}},195:function(t,e,a){var i=a(6)(a(196),a(197),null,null,null);t.exports=i.exports},196:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(15),s=a.n(i);e.default={props:["pageInfo"],mounted:function(){},computed:{pages:function(){for(var t=[],e=1;e<=this.totalPages;e++)t.push(e);return t},totalPages:function(){return this.pageInfo.total_pages||this.pageInfo.last_page}},methods:{prev:function(){if(1==this.pageInfo.current_page)return 0;var t=this.pageInfo.current_page-1;s.a.$emit("load-page",t)},next:function(){if(this.pageInfo.current_page==this.totalPages)return 0;var t=this.pageInfo.current_page+1;s.a.$emit("load-page",t)},loadPage:function(t){s.a.$emit("load-page",t)}}}},197:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.totalPages?a("div",[a("paginate",{attrs:{"page-count":t.totalPages,"click-handler":t.loadPage,"prev-text":"Prev","next-text":"Next","container-class":"Page pagination"}},[t._v("\n    >\n    ")])],1):t._e()},staticRenderFns:[]}},212:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(192),s=a(15),r=a.n(s),n=a(213),o=a.n(n),c=a(194),l=a.n(c);e.default={data:function(){return{users:[],loadCount:0,loading:!1,printList:[],search:"",order:"latest",records:100,pageInfo:l.a,edit:new i.a(o.a),editIndex:"",scope:"/admin",scopeApi:"/api/admin"}},components:{user:a(214),paginator:a(195)},mounted:function(){this.loadUsers(),r.a.$on("load-page",this.reload),r.a.$on("edit-user",this.editUser)},methods:{loadUsers:function(){var t=this;axios.get("/api/admin/users").then(function(e){t.users=e.data.data,t.updatePageInfo(e.data)}).catch(function(e){t.showAlert("somthing went wrong")})},loadingComplete:function(){this.loading=!1},loadingFail:function(){this.loading=!1,alert("Loading Failed")},updatePageInfo:function(t){this.pageInfo=t.meta.pagination},reload:function(t){var e=this;axios.get("/api/admin/users?search="+this.search+"&records="+this.records+"&page="+t).then(function(t){e.users=t.data.data,e.updatePageInfo(t.data)}).catch(function(t){alert(t)})},reloadFromFirstPage:function(){var t=this;axios.get("/api/admin/users?search="+this.search+"&records="+this.records).then(function(e){t.users=e.data.data,t.updatePageInfo(e.data)}).catch(function(t){alert(t)})},editUser:function(t){this.editIndex=this.users.map(function(t){return t.id}).indexOf(t),this.copyToEdit(this.users[this.editIndex]),$("#edit-user").modal("show")},copyToEdit:function(t){this.edit.id=t.id,this.edit.name=t.name,this.edit.email=t.email,this.edit.uid=t.uid,this.edit.activated=t.activated,this.edit.type=t.type,this.edit.expire_at=t.expire_at,this.edit.totalReceipts=t.totalReceipts},copyFromEdit:function(){var t=this.users[this.editIndex];t.id=this.edit.id,t.name=this.edit.name,t.email=this.edit.email,t.uid=this.edit.uid,t.activated=this.edit.activated,t.type=this.edit.type,t.expire_at=this.edit.expire_at,t.totalReceipts=this.edit.totalReceipts},update:function(){var t=this;this.loading=!0,this.edit.post(this.scopeApi+"/users/"+this.edit.id+"/update").then(function(e){t.loading=!1,t.copyFromEdit(),$("#edit-user").modal("hide"),t.$notify({group:"notice",type:"success",title:"Action successful",text:"Receipt edited <b>successfully</b>",duration:1e4,speed:1e3})}).catch(function(e){t.loading=!1;var a=[];for(var i in t.edit.errors.errors)a.push(t.edit.errors.get(i));console.log,t.$notify({group:"notice",type:"error",title:"Error ",text:"Can't complete the action as something went <b>wrong</b>",duration:1e4,speed:1e3})})}}}},213:function(t,e){t.exports={id:"",name:"",email:"",uid:"",type:"",expire_at:"",totalReceipts:"",create_at:"",activated:""}},214:function(t,e,a){var i=a(6)(a(215),a(216),null,null,null);t.exports=i.exports},215:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(0),s=a.n(i),r=a(15),n=a.n(r);e.default={data:function(){return{addToPrintList:!1,localUser:""}},props:["user"],computed:{createdAt:function(){return s.a(this.user.created_at).format("MMM Do YY")},expireAt:function(){return s.a(this.user.expire_at).format("MMM Do YY")},active:function(){return this.user.activated}},mounted:function(){this.localUser=this.user},methods:{edit:function(){n.a.$emit("edit-user",this.user.id)},deactivateUser:function(){var t=this;axios.get("/api/admin/users/"+this.user.id+"/deactivate").then(function(e){t.user.activated=!1,t.$notify({group:"notice",type:"success",title:"Action Successful",text:"User is successfully <b> deactivated </b>",duration:1e4,speed:1e3})}).catch(function(e){t.$notify({group:"notice",type:"error",title:"Error ",text:"Can't complete the action as something went <b>wrong</b>",duration:1e4,speed:1e3})})},activateUser:function(){var t=this;axios.get("/api/admin/users/"+this.user.id+"/activate").then(function(e){t.user.activated=!0,t.$notify({group:"notice",type:"success",title:"Action Successful",text:"User is successfully <b> activated </b>",duration:1e4,speed:1e3})}).catch(function(e){t.$notify({group:"notice",type:"error",title:"Error ",text:"Can't complete the action as something went <b>wrong</b>",duration:1e4,speed:1e3})})},userSendToReceipts:function(){window.location.href="/admin/users/"+this.user.id+"/receipts"}}}},216:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{domProps:{textContent:t._s(t.user.uid)}}),t._v(" "),a("td",{domProps:{textContent:t._s(t.user.name)}}),t._v(" "),a("td",{domProps:{textContent:t._s(t.user.email)}}),t._v(" "),a("td",{domProps:{textContent:t._s(t.user.type)}}),t._v(" "),a("td",{domProps:{textContent:t._s(t.user.totalReceipts)}}),t._v(" "),a("td",[a("a",{on:{click:function(e){e.preventDefault(),t.userSendToReceipts(e)}}},[t._v("Receipts..")])]),t._v(" "),a("td",{domProps:{textContent:t._s(t.createdAt)}}),t._v(" "),a("td",{domProps:{textContent:t._s(t.expireAt)}}),t._v(" "),a("td",[t.active?a("span",{staticClass:"text-success"},[t._v("Active")]):a("span",{staticClass:"text-danger"},[t._v("Deavtive")])]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-primary btn-sm",on:{click:t.edit}},[t._v("Edit")]),t._v(" "),t.active?a("button",{staticClass:"btn btn-danger btn-sm",on:{click:t.deactivateUser}},[t._v("Deavtivate")]):a("button",{staticClass:"btn btn-success btn-sm",on:{click:t.activateUser}},[t._v("Activate")])])])},staticRenderFns:[]}},217:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("notifications",{attrs:{group:"notice",classes:"vue-notification z-index"}}),t._v(" "),a("div",{staticClass:"col-xs-6"},[a("form",{on:{submit:function(e){e.preventDefault(),t.reloadFromFirstPage(e)}}},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search for..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),t._m(0)])])]),t._v(" "),a("div",{staticClass:"col-sm-4 col-xs-6 col-xs-offset-0 col-sm-offset-2"},[a("div",{staticClass:"input-group"},[t._m(1),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.records,expression:"records"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.records=e.target.multiple?a:a[0]},t.reloadFromFirstPage]}},[a("option",{attrs:{value:"5"}},[t._v("5")]),t._v(" "),a("option",{attrs:{value:"10"}},[t._v("10")]),t._v(" "),a("option",{attrs:{value:"25"}},[t._v("25")]),t._v(" "),a("option",{attrs:{value:"50"}},[t._v("50")]),t._v(" "),a("option",{attrs:{value:"100"}},[t._v("100")]),t._v(" "),a("option",{attrs:{value:"250"}},[t._v("250")]),t._v(" "),a("option",{attrs:{value:"500"}},[t._v("500")]),t._v(" "),a("option",{attrs:{value:"1000"}},[t._v("1000")])])])])],1),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered"},[a("tbody",[t._m(2),t._v(" "),t._l(t.users,function(t){return a("user",{key:t.id,attrs:{user:t}})})],2)])]),t._v(" "),a("paginator",{attrs:{"page-info":t.pageInfo}}),t._v(" "),a("div",{staticClass:"form-group"},[a("span",{staticClass:"btn btn-primary"},[t._v("Print "),t.printList.length?a("span",{domProps:{textContent:t._s("("+t.printList.length+")")}}):t._e()])]),t._v(" "),a("iframe",{staticClass:"hide",attrs:{id:"print-frame",name:"frame",src:"",frameborder:"0"},on:{load:t.loadingComplete}}),t._v(" "),t.loading?a("div",{staticClass:"overlay"},[a("loader",{attrs:{color:"#337ab7"}})],1):t._e(),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"edit-user",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(3),t._v(" "),a("div",{staticClass:"modal-body"},[a("form",{staticClass:"form-horizontal"},[a("h3",[t._v("User Info")]),t._v(" "),a("div",{},[a("div",{staticClass:"col-xs-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"user-uid"}},[t._v("User Uid")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.uid,expression:"edit.uid"}],staticClass:"form-control",attrs:{type:"text",id:"user-uid",disabled:""},domProps:{value:t.edit.uid},on:{input:function(e){e.target.composing||(t.edit.uid=e.target.value)}}})])])]),t._v(" "),a("div",{},[a("div",{staticClass:"col-xs-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"user-name"}},[t._v("User Name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.name,expression:"edit.name"}],staticClass:"form-control",attrs:{type:"text",id:"user-name",placeholder:"User Name"},domProps:{value:t.edit.name},on:{input:function(e){e.target.composing||(t.edit.name=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-xs-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"user-email"}},[t._v("Email")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.email,expression:"edit.email"}],staticClass:"form-control",attrs:{type:"text",id:"user-email",placeholder:"Sender Email"},domProps:{value:t.edit.email},on:{input:function(e){e.target.composing||(t.edit.email=e.target.value)}}})])])]),t._v(" "),a("div",{},[a("div",{staticClass:"col-xs-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"user-type"}},[t._v("Type")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.edit.type,expression:"edit.type"}],staticClass:"form-control",attrs:{id:"user-type"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.edit.type=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"user"}},[t._v("User")]),t._v(" "),a("option",{attrs:{value:"retailer"}},[t._v("Retailer")]),t._v(" "),a("option",{attrs:{value:"wholesaler"}},[t._v("Wholesaler")]),t._v(" "),a("option",{attrs:{value:"manufacturer"}},[t._v("Manufacturer")])])])]),t._v(" "),a("div",{staticClass:"col-xs-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"total-receipts"}},[t._v("Total Receipts")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.totalReceipts,expression:"edit.totalReceipts"}],staticClass:"form-control",attrs:{type:"text",id:"total-receipts",placeholder:"Sender Postcode",disabled:""},domProps:{value:t.edit.totalReceipts},on:{input:function(e){e.target.composing||(t.edit.totalReceipts=e.target.value)}}})])])]),t._v(" "),a("div",{},[a("div",{staticClass:"col-xs-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"status"}},[t._v("Status")]),t._v(" "),a("input",{staticClass:"form-control",attrs:{type:"text",id:"status",disabled:""},domProps:{value:t.edit.activated?"Active":"Deactive"}})])]),t._v(" "),a("div",{staticClass:"col-xs-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"total-receipts"}},[t._v("Expire At")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.expire_at,expression:"edit.expire_at"}],staticClass:"form-control",attrs:{type:"date",id:"total-receipts",placeholder:"Sender Postcode"},domProps:{value:t.edit.expire_at},on:{input:function(e){e.target.composing||(t.edit.expire_at=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"clearfix"})]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.update}},[t._v("Save changes")])])])])])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-default",attrs:{type:"submit"}},[t._v("Go!")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"input-group-btn"},[a("button",{staticClass:"btn btn-default ",attrs:{type:"button"}},[a("span",{staticClass:"small"},[t._v("RECORDS")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("Uid")]),t._v(" "),a("th",[t._v("Name")]),t._v(" "),a("th",[t._v("Email")]),t._v(" "),a("th",[t._v("Type")]),t._v(" "),a("th",[t._v("Total Receipts")]),t._v(" "),a("th",[t._v("Go To")]),t._v(" "),a("th",[t._v("Account Created At")]),t._v(" "),a("th",[t._v("Expire At")]),t._v(" "),a("th",[t._v("Status")]),t._v(" "),a("td",[t._v("Actions")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])]),t._v(" "),a("h4",{staticClass:"modal-title"},[t._v("Edit User")])])}]}}});