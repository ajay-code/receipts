webpackJsonp([3],{195:function(t,e,i){var r=i(5)(i(240),i(241),null,null,null);t.exports=r.exports},197:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=i(198),s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(){function t(e){r(this,t),this.originalData=e;for(var i in e)this[i]=e[i];this.errors=new n.a}return s(t,[{key:"data",value:function(){var t={};for(var e in this.originalData)t[e]=this[e];return t}},{key:"reset",value:function(){for(var t in this.originalData)this[t]="";this.errors.clear()}},{key:"post",value:function(t){return this.submit("post",t)}},{key:"put",value:function(t){return this.submit("put",t)}},{key:"patch",value:function(t){return this.submit("patch",t)}},{key:"delete",value:function(t){return this.submit("delete",t)}},{key:"submit",value:function(t,e){var i=this;return new Promise(function(r,n){axios[t](e,i.data()).then(function(t){i.onSuccess(t.data),r(t.data)}).catch(function(t){i.onFail(t.response.data),n(t.response.data)})})}},{key:"onSuccess",value:function(t){}},{key:"onFail",value:function(t){this.errors.record(t)}}]),t}();e.a=a},198:function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function(){function t(){r(this,t),this.errors={}}return n(t,[{key:"has",value:function(t){return this.errors.hasOwnProperty(t)}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"get",value:function(t){if(this.errors[t])return this.errors[t][0]}},{key:"record",value:function(t){this.errors=t}},{key:"clear",value:function(t){if(t)return void delete this.errors[t];this.errors={}}}]),t}();e.a=s},199:function(t,e){t.exports={current_page:null,first_page:1,last_page:null,total:null,next_page_url:null,prev_page_url:null}},200:function(t,e){function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var r;t.exports=(r={created_at:"",id:"",receiver_address:"",receiver_email:"",receiver_name:"",receiver_phone:"",receiver_postcode:"",receiver_product:"",sender_address:"",amount:"",product_cost:"",postage_cost:"",sender_id:"",sender_email:"",sender_name:"",sender_phone:"",sender_postcode:"",tracking:""},i(r,"receiver_product",""),i(r,"updated_at",""),i(r,"user_id",""),r)},201:function(t,e,i){var r=i(5)(i(202),i(203),null,null,null);t.exports=r.exports},202:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),n=i.n(r);e.default={props:["pageInfo"],mounted:function(){},computed:{pages:function(){for(var t=[],e=1;e<=this.totalPages;e++)t.push(e);return t},totalPages:function(){return this.pageInfo.total_pages||this.pageInfo.last_page}},methods:{prev:function(){if(1==this.pageInfo.current_page)return 0;var t=this.pageInfo.current_page-1;n.a.$emit("load-page",t)},next:function(){if(this.pageInfo.current_page==this.totalPages)return 0;var t=this.pageInfo.current_page+1;n.a.$emit("load-page",t)},loadPage:function(t){n.a.$emit("load-page",t)}}}},203:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.totalPages?i("div",[i("paginate",{attrs:{"page-count":t.totalPages,"click-handler":t.loadPage,"prev-text":"Prev","next-text":"Next","container-class":"Page pagination"}},[t._v("\n        >\n    ")])],1):t._e()},staticRenderFns:[]}},204:function(t,e,i){"use strict";function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n,s=i(197),a=i(7),o=i.n(a),c=i(200),l=i.n(c),p=i(199),d=i.n(p);e.a={data:function(){return{receipts:[],loadCount:0,printList:[],selectAllReceipts:!1,search:"",order:"latest",records:100,pageInfo:d.a,edit:new s.a(l.a),editIndex:"",scope:"",scopeApi:"/api"}},props:{admin:{type:Boolean}},created:function(){this.admin&&(this.scope="/admin",this.scopeApi="/api/admin")},mounted:function(){this.loadReceipts(),o.a.$on("print-single-receipt",this.printSingleReceipt),o.a.$on("add-to-print-list",this.addToPrintList),o.a.$on("remove-from-print-list",this.removeFromPrintList),o.a.$on("load-page",this.reload),o.a.$on("edit-receipt",this.editReceipt),o.a.$on("delete-receipt",this.deleteReceipt)},methods:(n={loadReceipts:function(){var t=this;axios.get(this.scopeApi+"/receipts").then(function(e){t.receipts=e.data.data,t.updatePageInfo(e.data)}).catch(function(e){t.sendErrorNotice()})},reload:function(t){var e=this;axios.get(this.scopeApi+"/receipts?search="+this.search+"&records="+this.records+"&page="+t).then(function(t){e.receipts=t.data.data,e.updatePageInfo(t.data)}).catch(function(t){e.sendErrorNotice()})},reloadFromFirstPage:function(){var t=this;axios.get(this.scopeApi+"/receipts?search="+this.search+"&records="+this.records).then(function(e){t.receipts=e.data.data,t.updatePageInfo(e.data)}).catch(function(e){t.sendErrorNotice()})},deleteReceipt:function(t){var e=this;axios.get(this.scopeApi+"/receipts/delete/"+t).then(function(i){e.sendSuccessNotice("Receipt Deleted Successfully");var r=e.receipts.map(function(t){return t.id}).indexOf(t);e.receipts.splice(r,1)}).catch(function(t){e.sendErrorNotice()})},deleteMultipleReceipts:function(){var t=this;if(!this.printList.length)return void this.sendErrorNotice("Please Select At Least One Reeipt");axios.post(this.scopeApi+"/receipts/delete/",{receipts:this.printList}).then(function(e){t.sendSuccessNotice("Receipt Deleted Successfully"),t.printList.forEach(function(e){var i=t.receipts.map(function(t){return t.id}).indexOf(e);t.receipts.splice(i,1)}),t.clearPrintList()}).catch(function(e){t.sendErrorNotice()})},printSingleReceipt:function(t){var e=this;o.a.$emit("start-loading"),axios.get(this.scope+"/receipts/print/"+t).then(function(t){e.loadSinglePdf(t.data.pdfName)})},loadSinglePdf:function(t){var e="";window.isMobile()?(e="/pdf/"+t+"/download",o.a.$emit("stop-loading")):e="/pdf/"+t,$("#print-frame").attr("src",e)},loadingComplete:function(){window.isMobile()||(o.a.$emit("stop-loading"),0!==this.loadCount&&(window.frames.frame.print(),this.loadCount++),this.loadCount++)},loadingFail:function(){o.a.$emit("stop-loading"),alert("Loading Failed")},addToPrintList:function(t){this.printList.push(t)},removeFromPrintList:function(t){var e=this.printList.indexOf(t);this.printList.splice(e,1)},print:function(){var t=this;this.printList.length?(o.a.$emit("start-loading"),axios.post(this.scope+"/receipts/print",{receipts:this.printList}).then(function(e){t.loadSinglePdf(e.data.pdfName)})):alert("please select atleast on receipt")},updatePageInfo:function(t){this.pageInfo.current_page=t.current_page,this.pageInfo.last_page=t.last_page,this.pageInfo.total=t.total,this.pageInfo.next_page_url=t.next_page_url,this.pageInfo.prev_page_url=t.prev_page_url}},r(n,"reload",function(t){var e=this;axios.get(this.scopeApi+"/receipts?search="+this.search+"&records="+this.records+"&page="+t).then(function(t){e.receipts=t.data.data,e.updatePageInfo(t.data)}).catch(function(t){e.sendErrorNotice()})}),r(n,"editReceipt",function(t){this.editIndex=this.receipts.map(function(t){return t.id}).indexOf(t),o.a.$emit("edit",this.receipts[this.editIndex])}),r(n,"updateReceipt",function(t){var e=this.receipts[this.editIndex];for(var i in e)i.includes("address")?e[i]=t[i].replace("\n","|"):e[i]=t[i]}),r(n,"update",function(){var t=this;o.a.$emit("start-loading"),this.edit.post(this.scope+"/receipts/"+this.edit.id).then(function(e){o.a.$emit("stop-loading"),t.copyFromEdit(),$("#edit-receipt").modal("hide"),t.sendSuccessNotice("Receipt successfully edited")}).catch(function(e){o.a.$emit("stop-loading");var i="<ul>";for(var r in t.edit.errors.errors)i+="<li>"+t.edit.errors.get(r)+"</li>";i+="</ul>",t.sendErrorNotice(i)})}),r(n,"clearPrintList",function(){o.a.$emit("clear-every-receipt"),this.printList=[]}),r(n,"downloadCsv",function(){if(this.printList.length){o.a.$emit("start-loading");var t="";this.printList.forEach(function(e){t+='<input name="receipts[]" value="'+e+'">'},this),jQuery('<form action="'+this.scope+'/receipts/csv" method="post" target="csv-frame">\n                      <input name="_token" value="'+Laravel.csrfToken+'">\n                     '+t+"\n                  </form>").appendTo("body").submit().remove(),o.a.$emit("stop-loading")}else alert("please select atleast on receipt")}),r(n,"selectAll",function(){this.selectAllReceipts?o.a.$emit("select-all"):o.a.$emit("deselect-all")}),r(n,"sendErrorNotice",function(t){t=t||"Something Went Wrong",this.$notify({group:"notice",type:"error",title:"Error ",text:t,duration:5e3,speed:1e3})}),r(n,"sendSuccessNotice",function(t){t=t||"Action Was Persormed Successfully",this.$notify({group:"notice",type:"success",title:"Success ",text:t,duration:5e3,speed:1e3})}),n)}},210:function(t,e,i){function r(t){i(211)}var n=i(5)(i(213),i(214),r,null,null);t.exports=n.exports},211:function(t,e,i){var r=i(212);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);i(17)("15d58c14",r,!0)},212:function(t,e,i){e=t.exports=i(16)(void 0),e.push([t.i,"td:not(:first-child){min-width:140px}td{text-align:center}",""])},213:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(7),n=i.n(r),s=i(0),a=i.n(s);e.default={data:function(){return{addToPrintList:!1,localReceipt:""}},props:["receipt"],computed:{address:function(){return this.receipt.receiver_address.replace(/\|/g,", ")},createdAt:function(){return a.a(this.receipt.created_at).format("DD-MM-YYYY  HH:mm")}},mounted:function(){this.localReceipt=this.receipt,n.a.$on("clear-every-receipt",this.clearedFromPrintList),n.a.$on("select-all",this.selectAll),n.a.$on("deselect-all",this.deselectAll)},methods:{print:function(){n.a.$emit("print-single-receipt",this.receipt.id)},toggleFromPrintList:function(){this.addToPrintList?n.a.$emit("add-to-print-list",this.receipt.id):n.a.$emit("remove-from-print-list",this.receipt.id)},clearedFromPrintList:function(){this.addToPrintList=!1},edit:function(){n.a.$emit("edit-receipt",this.receipt.id)},deleteReceipt:function(){n.a.$emit("delete-receipt",this.receipt.id)},selectAll:function(){this.addToPrintList=!0,this.toggleFromPrintList()},deselectAll:function(){this.addToPrintList=!1,this.toggleFromPrintList()}}}},214:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.addToPrintList,expression:"addToPrintList"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.addToPrintList)?t._i(t.addToPrintList,null)>-1:t.addToPrintList},on:{change:t.toggleFromPrintList,__c:function(e){var i=t.addToPrintList,r=e.target,n=!!r.checked;if(Array.isArray(i)){var s=t._i(i,null);n?s<0&&(t.addToPrintList=i.concat(null)):s>-1&&(t.addToPrintList=i.slice(0,s).concat(i.slice(s+1)))}else t.addToPrintList=n}}})]),t._v(" "),i("td",{domProps:{textContent:t._s(t.receipt.sender_name)}}),t._v(" "),i("td",{domProps:{textContent:t._s(t.receipt.sender_id)}}),t._v(" "),i("td",{domProps:{textContent:t._s(t.receipt.sender_email)}}),t._v(" "),i("td",{domProps:{textContent:t._s(t.receipt.receiver_name)}}),t._v(" "),i("td",{domProps:{textContent:t._s(t.receipt.receiver_email)}}),t._v(" "),i("td",{domProps:{textContent:t._s(t.address)}}),t._v(" "),i("td",{domProps:{textContent:t._s(t.receipt.receiver_postcode)}}),t._v(" "),i("td",[i("a",{attrs:{href:"tel:"+t.receipt.receiver_phone},domProps:{textContent:t._s(t.receipt.receiver_phone)}})]),t._v(" "),i("td",{domProps:{textContent:t._s(t.receipt.receiver_product)}}),t._v(" "),i("td",{domProps:{textContent:t._s(t.receipt.amount)}}),t._v(" "),i("td",{domProps:{textContent:t._s(t.receipt.product_cost)}}),t._v(" "),i("td",{domProps:{textContent:t._s(t.receipt.postage_cost)}}),t._v(" "),i("td",{domProps:{textContent:t._s(t.receipt.tracking)}}),t._v(" "),i("td",{domProps:{textContent:t._s(t.createdAt)}}),t._v(" "),i("td",[i("span",{staticClass:"pointer",on:{click:t.edit}},[i("i",{staticClass:"fa fa-edit",attrs:{title:"edit"}})]),t._v(" "),i("span",{staticClass:"pointer",on:{click:t.print}},[i("i",{staticClass:"fa fa-print text-primary",attrs:{title:"print"}})]),t._v(" "),i("span",{staticClass:"pointer",on:{click:t.deleteReceipt}},[i("i",{staticClass:"fa fa-trash-o text-danger",attrs:{title:"print"}})])])])},staticRenderFns:[]}},240:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(204);e.default={data:function(){return{}},components:{receipt:i(210),paginator:i(201)},mixins:[r.a],methods:{}}},241:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row"},[i("div",{staticClass:"col-xs-6"},[i("form",{on:{submit:function(e){e.preventDefault(),t.reloadFromFirstPage(e)}}},[i("div",{staticClass:"input-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search for..."},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),t._m(0)])])]),t._v(" "),i("div",{staticClass:"col-sm-4 col-xs-6 col-xs-offset-0 col-sm-offset-2"},[i("div",{staticClass:"input-group"},[t._m(1),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.records,expression:"records"}],staticClass:"form-control",on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.records=e.target.multiple?i:i[0]},t.reloadFromFirstPage]}},[i("option",{attrs:{value:"5"}},[t._v("5")]),t._v(" "),i("option",{attrs:{value:"10"}},[t._v("10")]),t._v(" "),i("option",{attrs:{value:"25"}},[t._v("25")]),t._v(" "),i("option",{attrs:{value:"50"}},[t._v("50")]),t._v(" "),i("option",{attrs:{value:"100"}},[t._v("100")]),t._v(" "),i("option",{attrs:{value:"250"}},[t._v("250")]),t._v(" "),i("option",{attrs:{value:"500"}},[t._v("500")]),t._v(" "),i("option",{attrs:{value:"1000"}},[t._v("1000")])])])])]),t._v(" "),i("br"),t._v(" "),i("div",{staticClass:"table-responsive"},[i("table",{staticClass:"table table-bordered"},[i("tbody",[i("tr",[i("th",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.selectAllReceipts,expression:"selectAllReceipts"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selectAllReceipts)?t._i(t.selectAllReceipts,null)>-1:t.selectAllReceipts},on:{click:t.selectAll,__c:function(e){var i=t.selectAllReceipts,r=e.target,n=!!r.checked;if(Array.isArray(i)){var s=t._i(i,null);n?s<0&&(t.selectAllReceipts=i.concat(null)):s>-1&&(t.selectAllReceipts=i.slice(0,s).concat(i.slice(s+1)))}else t.selectAllReceipts=n}}})]),t._v(" "),i("th",[t._v("Sender Name")]),t._v(" "),i("th",[t._v("Sender ID")]),t._v(" "),i("th",[t._v("Sender Email")]),t._v(" "),i("th",[t._v("Receiver Name")]),t._v(" "),i("th",[t._v("Receiver Email")]),t._v(" "),i("th",[t._v("Receiver Address")]),t._v(" "),i("th",[t._v("Postcode")]),t._v(" "),i("th",[t._v("Phone Number")]),t._v(" "),i("th",[t._v("Item")]),t._v(" "),i("th",[t._v("Amount")]),t._v(" "),i("th",[t._v("Product Cost")]),t._v(" "),i("th",[t._v("Postage Cost")]),t._v(" "),i("th",[t._v("Tracking")]),t._v(" "),i("th",[t._v("Date & Time")]),t._v(" "),i("th",[t._v("Actions")])]),t._v(" "),t._l(t.receipts,function(t){return i("receipt",{key:t.id,attrs:{receipt:t}})})],2)])]),t._v(" "),i("paginator",{attrs:{"page-info":t.pageInfo}}),t._v(" "),i("div",{staticClass:"form-group"},[i("span",{staticClass:"btn btn-primary",on:{click:t.print}},[t._v("Print\n            "),t.printList.length?i("span",{domProps:{textContent:t._s("("+t.printList.length+")")}}):t._e()]),t._v(" "),t.printList.length?i("span",{staticClass:"btn btn-danger",on:{click:t.clearPrintList}},[t._v("Clear Print List")]):t._e(),t._v(" "),i("span",{staticClass:"btn btn-primary",on:{click:t.downloadCsv}},[t._v("Export")]),t._v(" "),i("br"),i("br"),t._v(" "),i("span",{staticClass:"btn btn-danger",on:{click:t.deleteMultipleReceipts}},[t._v("Delete Selected Receipts")])]),t._v(" "),i("iframe",{staticClass:"hide",attrs:{id:"print-frame",name:"frame",src:"",frameborder:"0"},on:{load:t.loadingComplete}}),t._v(" "),i("iframe",{staticClass:"hide",attrs:{id:"csv-frame",name:"csv-frame",src:"",frameborder:"0"}}),t._v(" "),i("edit-receipt",{on:{update:t.updateReceipt}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"input-group-btn"},[i("button",{staticClass:"btn btn-default",attrs:{type:"submit"}},[t._v("Go!")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"input-group-btn"},[i("button",{staticClass:"btn btn-default",attrs:{type:"button"}},[t._v("RECORDS")])])}]}}});